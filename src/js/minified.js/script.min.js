"use strict";import Questions from"./questions.js";import{backToForm,continueDuringSurvey,backToWelcome,goingOutOfWelcome}from"./animations.js";import accountRotator,{submittedForm}from"./accountrotator.js";const body=document.querySelector("#body"),controlButtons=document.querySelector(".control-buttons"),textInputFields=document.querySelectorAll(".ads"),textFieldLabels=document.querySelectorAll("label"),selectionChoice=document.querySelector(".selection-rule"),ContinueButton=document.getElementById("continue"),BackButton=document.querySelector(".back-button"),ChangeEmailButton=document.getElementById("changeemail"),progressSVG=document.querySelector(".progress"),progress=document.querySelector(".percentage"),currentStage=document.querySelector(".current-stage"),errorMessage=document.querySelector(".error-message"),loaderDOM=document.querySelector(".loader"),changeEmailContainer=document.querySelector(".change-email"),resubmitEmailContainer=document.querySelector(".resubmitmodal"),editfield=document.getElementById("edit"),cancel=document.querySelectorAll(".cancel"),changeEmail=document.querySelectorAll(".saveemail"),inner=document.querySelector(".inner"),successText=document.querySelector(".sent-message"),errorText=document.querySelector(".error-text"),starterPage=document.querySelector(".q-container"),startQuestion=document.querySelector(".main-Q-container"),thankYou=document.querySelector(".thank-you"),userEmail=document.getElementById("email"),changeEmailBox=document.querySelector(".email"),dontResubmitButton=document.querySelector(".no"),emailRegex=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/),buttons=document.querySelectorAll(".btnn"),submitLoader=document.querySelector(".circle-loader");let otfp=!1;body.classList.add("soft");export function debounce(t,e){let n;return function(...s){n&&clearTimeout(n),n=setTimeout((()=>{t.apply(this,s)}),e)}}export const disableButtons=t=>{buttons.forEach((e=>{t&&(e.disabled=!0),t||(e.disabled=!1)}))};changeEmailBox.addEventListener("click",(t=>{editfield.focus(),editfield.contentEditable=!0})),ContinueButton.classList.add("widen"),window.screen.availWidth<=480&&(currentStage.x.baseVal[0].value=100,currentStage.y.baseVal[0].value=145,ContinueButton.classList.add("widen"));let USERS_FILE=new Object({1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{},11:{},12:{},13:{},14:{},15:{},16:{},17:{},18:{},19:{},20:{}});export function setStage(t){sessionStorage.setItem("form-stage",t.toString())}setStage(0);export function currentFormStage(){return parseInt(sessionStorage.getItem("form-stage"))}function reset(){Object.entries(USERS_FILE).map((t=>t[1])).filter((t=>Object.keys(t).length>0)).length>1&&(animateErrorMessage(3e3,600,20,"Survey has been reset because you changed your Primary Area Of Expertise.","show-reset-message","remove-reset-message"),USERS_FILE={1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{},11:{},12:{},13:{},14:{},15:{},16:{},17:{},18:{},19:{},20:{}})}[textFieldLabels,textInputFields].forEach((t=>{t.forEach((t=>{["click","focus"].forEach((e=>{t.addEventListener(e,(t=>{"LABEL"===t.target.nodeName&&(t.target.nextElementSibling.focus(),t.target.nextElementSibling.click()),"INPUT"===t.target.nodeName&&(t.target.offsetParent.children[1].style.borderBottom="1px solid #2260ff",t.target.offsetParent.firstElementChild.classList+=" move-up")}))}))})),t.forEach((t=>{t.addEventListener("blur",(t=>{if(t.target.classList.value.includes("ads"))try{0===t.target.value.trim().length&&(t.target.offsetParent.firstElementChild.classList.remove("move-up"),t.target.offsetParent.children[1].style.borderBottom="")}catch(t){}}))}))})),textInputFields[0].value.length>0&&(textInputFields[0].offsetParent.firstElementChild.classList+=" move-up",textInputFields[0].offsetParent.children[1].style.borderBottom="1px solid #2260ff");export function animateErrorMessage(t,e,n,s,a,o){errorText.innerText=s;const i=errorText.scrollWidth+30;let r=["remove-error-message","remove-reset-message"];for(let t of r)errorMessage.classList.remove(t);errorMessage.classList.add(a),window.screen.availWidth<=1024&&gsap.to(".circle-progress",{opacity:0,duration:.3}),window.screen.availWidth>=1024&&(errorMessage.style.width=`${n}px`),window.screen.availWidth<1024&&(errorMessage.style.width="100%");debounce((()=>{window.screen.availWidth>=1024?errorMessage.style.width=i+"px":errorMessage.style.width="100%"}),e/2)();debounce((()=>{errorText.style.opacity="1"}),e)();debounce((()=>{let t=["show-error-message","show-reset-message"];window.screen.availWidth>=1024&&(errorMessage.style.width=`${n}px`),errorText.style.opacity="0";debounce((()=>{for(let e of t)errorMessage.classList.remove(e);errorMessage.classList.add(o)}),e/2)(),window.screen.availWidth&&gsap.to(".circle-progress",{opacity:1,duration:.3})}),t)();debounce((()=>{window.screen.availWidth>=1024&&(errorMessage.style.width="auto"),window.screen.availWidth<1024&&(errorMessage.style.width="100%"),userEmail.classList.remove("empty-email-field")}),t+e)()}function showSending(t){if(successText.style.opacity="0",successText.innerText=t,loaderDOM.style.width=submitLoader.scrollWidth+50+"px",loaderDOM.classList.remove("remove"),loaderDOM.classList.add("show"),loaderDOM.style.backgroundColor="orange",screen.width>767){debounce((()=>{successText.style.display="flex",loaderDOM.style.justifyContent="flex-start",loaderDOM.style.width=submitLoader.scrollWidth+successText.scrollWidth+50+"px"}),700)();debounce((()=>{successText.style.opacity="1"}),900)()}}function validateEmail(t,e){let n=t;return emailRegex.test(n)?emailRegex.test(n)?(Questions.length,!0):void 0:(animateErrorMessage(3e3,600,20,"Please enter a valid email address.","show-error-message","remove-error-message"),!1)}function animateProgress(t){let e=Object.entries(USERS_FILE).map((t=>t[1])).filter((t=>Object.keys(t).length>0)),n=Object.keys(USERS_FILE).length,s=Math.floor(e.length/n*100),a=Math.floor(s/100*502);progressSVG.style.transition=".5s",progressSVG.style.strokeDashoffset=502-a,progress.innerHTML=`${s}%`,t>=Questions.length?currentStage.innerHTML=`${t-1} / ${n}`:currentStage.innerHTML=`${t} / ${n}`}function sendEmail(t){if(0===Object.entries(USERS_FILE).map((t=>t[1])).filter((t=>0===Object.keys(t).length)).length){let e=Object.values(USERS_FILE),n=[];for(let t in e)n="2"===t||"8"===t||"9"===t?[...n,Object.values(e[t]).map((t=>t.answerText)).join(", ")]:[...n,Object.values(e[t])[0].answerText];let s="";const a=t=>2===t||3===t?Questions[t].question+n[0]:Questions[t].question;for(let t=1;t<=n.length;t++)s+=`<div id="test"\n\t\t\t\t\t\tstyle="background-color: #344854;\n\t\t\t\t\t\tpadding: 15px;\n\t\t\t\t\t\tborder-radius:5px;\n\t\t\t\t\t\twidth:auto;\n\t\t\t\t\t\tmax-width:650px;\n\t\t\t\t\t\ttext-align:left !important;\n\t\t\t\t\t\tmargin-top:30px">\n\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\tstyle="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\t\t\t\t\t\t\tfont-weight:400;\n\t\t\t\t\t\t\tfont-size: 1rem;\n\t\t\t\t\t\t\tletter-spacing:.3px;\n\t\t\t\t\t\t\tpadding: 0px;\n\t\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\t\twidth: auto;\n\t\t\t\t\t\t\ttext-align:left !important;\n\t\t\t\t\t\t\tcolor:whitesmoke; ">${a(t)}</h1>\n\t\t\t\t\t\t\t<p class="ra"\n\t\t\t\t\t\t\tstyle="color:#344654;\n\t\t\t\t\t\t\tfont-size:0.9rem;\n\t\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\t\tbackground-color: #f2c744;\n\t\t\t\t\t\t\tborder-radius:4px;\n\t\t\t\t\t\t\tborder: 2px solid #f2c744;\n\t\t\t\t\t\t\tfont-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t\ttext-align:left !important;\n\t\t\t\t\t\t\tmargin-top:15px  !important"\n\t\t\t\t\t\t\tmargin-bottom:0  !important>${n[t-1]}</p>\n\t\t\t\t\t</div>`;let o=`<!DOCTYPE html>\n\t\t\t\t\t\t<html>\n\t\t\t\t\t\t<head>\n\t\t\t\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\t\t\t<title>Email Template</title>\n\t\t\t\t\t\t\t<link rel="preconnect" href="https://fonts.googleapis.com">\n\t\t\t\t\t\t\t<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n\t\t\t\t\t\t\t<link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&display=swap" rel="stylesheet">\n\n\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t*{\n\t\t\t\t\t\t\t\tpadding:0;\n\t\t\t\t\t\t\t\tmargin:0;\n\t\t\t\t\t\t\t\tbox-sizing:border-box;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\t\t\tfont-family: 'Open Sans',system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t@media only screen and (max-width:600px){\n\t\t\t\t\t\t\t\t\t#body{}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t.end{\n\t\t\t\t\t\t\t\t\tpadding:7px 10px;\n\t\t\t\t\t\t\t\t\tborder-radius:3px;\n\t\t\t\t\t\t\t\t\tbackground-color:#344654\n\t\t\t\t\t\t\t\t\tcolor:  #f2c744;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t</head>\n\t\t\t\t\t\t<body\n\t\t\t\t\t\tid="body"\n\t\t\t\t\t\tstyle="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tborder-radius:0px;\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\t\tpadding:0 !important;\n\t\t\t\t\t\tcolor: #333333;">\n\n\t\t\t\t\t\t\t<table\n\t\t\t\t\t\t\twidth="100%"\n\t\t\t\t\t\t\tborder="0"\n\t\t\t\t\t\t\tcellspacing="0"\n\t\t\t\t\t\t\tcellpadding="0" align="center">\n\n\t\t\t\t\t\t\t\t<tr align="center">\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\talign="center"\n\t\t\t\t\t\t\t\t\tvalign="top"\n\t\t\t\t\t\t\t\t\tstyle="">\n\t\t\t\t\t\t\t\t\t\t<table\n\t\t\t\t\t\t\t\t\t\talign="center"\n\t\t\t\t\t\t\t\t\t\twidth="100%"\n\t\t\t\t\t\t\t\t\t\tborder="0"\n\t\t\t\t\t\t\t\t\t\tcellspacing="00"\n\t\t\t\t\t\t\t\t\t\tcellpadding="00"\n\t\t\t\t\t\t\t\t\t\tstyle="width:100%;\n\t\t\t\t\t\t\t\t\t\tmax-width:900px;\n\t\t\t\t\t\t\t\t\t\tborder-collapse: seperate;\n\t\t\t\t\t\t\t\t\t\tborder-spacing: 0px;\n\t\t\t\t\t\t\t\t\t\tmargin: auto;\n\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\tjustify-content:center;\n\t\t\t\t\t\t\t\t\t\tbackground-color: white;\n\t\t\t\t\t\t\t\t\t\tpadding-bottom:10px">\n\t\t\t\t\t\t\t\t\t\t<tbody align="center"\n\t\t\t\t\t\t\t\t\t\t\tstyle="width:100% !important;\n\t\t\t\t\t\t\t\t\t\t\tpadding:0px">\n\t\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\talign="center"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle="width:100% !important;\n\t\t\t\t\t\t\t\t\t\t\t\tpadding:0px">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\talign="start"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalign="top"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle="width:100%;\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding:0px;\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:white; ">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle="color:#344854;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext-align:left !important;">ðŸŽ‰ Hurray!</h1>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\t\t\t\t\t\tfont-size:.9rem;\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-top:15px;\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:#344854;\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext-align:left !important;">Below are your answers to each Questions asked</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</body>\n\t\t\t\t\t\t</html>`;debounce((()=>{showSending("Submitting Form..."),disableButtons(!0)}),500)();let i={my_html:o,user:t,reply_to:"gbadebojubril@gmail.com"};debounce((()=>{accountRotator(i)}),2e3)()}}function gotoNextStep(t,e){const n=document.querySelector(".answer-field"),s=document.querySelector(".Question");if(0===t){let e=0===userEmail.value.trim().length;if(e)return userEmail.classList.add("empty-email-field"),void animateErrorMessage(3e3,600,20,"Please enter your email address to continue.","show-error-message","remove-error-message");if(!e){if(!validateEmail(userEmail.value.trim(),t))return void userEmail.classList.add("empty-email-field");goingOutOfWelcome(),sessionStorage.setItem("email",userEmail.value.trim())}}if(++t>=e.length&&(inner.innerText=sessionStorage.getItem("email"),!0===submittedForm&&(resubmitEmailContainer.style.display="flex",gsap.fromTo(resubmitEmailContainer,{opacity:0},{opacity:1,duration:.3}),dontResubmitButton.onclick=()=>{gsap.fromTo(resubmitEmailContainer,{opacity:1},{opacity:0,duration:.3}),gsap.to(".control-buttons",{opacity:1,y:0},"<50%"),gsap.to(".circle-progress",{opacity:1},"<");debounce((()=>{resubmitEmailContainer.style.display="none"}),400)(),setStage(t-=1)}),!1===submittedForm&&sendEmail(sessionStorage.getItem("email")),animateProgress(20),t=e.length),t<=e.length&&t>0){body.classList.add("soft"),controlButtons.classList.add("csoft"),thankYou.style.display="none";debounce((()=>{ContinueButton.children[0].innerText="Continue",ContinueButton.style.display="flex",BackButton.style.display="flex",ContinueButton.classList.remove("widen"),BackButton.classList.remove("widen")}),500)();try{ChangeEmailButton.style.display="none"}catch(t){}try{if(Object.keys(USERS_FILE[t-1])&&0===Object.keys(USERS_FILE[t-1]).length)return void animateErrorMessage(3e3,600,20,"Please select an option","show-error-message","remove-error-message")}catch(t){}t<=e.length-1&&t>1&&continueDuringSurvey(s,n);debounce((()=>{e[t]&&(s.innerHTML=`<h1 class="qnumbering">Question ${t} of ${e.length-1}</h1>`+askQuestionsInteractively(t,e),displayAnswersInteractively(n,t,e))}),500)()}setStage(t),animateProgress(currentFormStage())}function gotoPreviousStep(t,e){const n=document.querySelector(".answer-field"),s=document.querySelector(".Question");if(--t<=0&&(t=0),setStage(t),animateProgress(currentFormStage()),t===parseInt(Object.keys(USERS_FILE).length)&&(backToForm(startQuestion,s,n),body.classList.remove("blurbody")),t<=0){thankYou.style.display="none";return debounce((()=>{BackButton.style.display="none",ContinueButton.classList.add("widen"),controlButtons.classList.remove("csoft"),startQuestion.style.display="none",starterPage.style.display="flex"}),500)(),void backToWelcome()}t>0&&(t<parseInt(Object.keys(USERS_FILE).length)&&continueDuringSurvey(s,n),setTimeout((()=>{ContinueButton.style.display="flex",BackButton.style.display="flex",BackButton.classList.remove("widen"),ContinueButton.classList.remove("widen")}),500),setTimeout((()=>{s.innerHTML=`<h1 class="qnumbering">Question ${t} of ${e.length-1}</h1>`+askQuestionsInteractively(t,e),displayAnswersInteractively(n,t,e)}),500))}function markAlreadyChosenSelections(t){const e=document.querySelectorAll(".ans-box");let n=Object.entries(USERS_FILE[t]).map((t=>t[0]));e.forEach((t=>{n.filter((e=>{t.dataset.id===e&&(t.classList.value.includes("textonlybox")&&addCheckAnimationForTextBoxOnly(t.children[0],t),t.classList.value.includes("text-imgbox")&&addCheckAnimationForImgTextBox(t.children[0],t),t.classList.value.includes("bare-ans")&&addCheckAnimationForIconAndText(t.children[0],t),t.classList.value.includes("two-ans")&&addCheckAnimationForTwoAns(t.children[0],t))}))}))}function askQuestionsInteractively(t,e){switch(t){case 2:case 3:let n=[];for(let t in USERS_FILE[1])n.push(USERS_FILE[1][t].answerText);return`${e[t].question} ${n[0]} ?`;default:return e[t].question}}function displayAnswersInteractively(t,e,n){function s(n,s){t.innerHTML="",setTimeout((()=>{switch(e){case 1:case 9:case 10:t.innerHTML+=`\n\t\t\t\t\t<div class="text-imgbox ans-box" id="ss" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t\t<div class="checker2" data-answer="${s.text}" data-id="${n}" ></div>\n\t\t\t\t\t\t<div class="image-container2" style="background-image:url(${s.img})" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t\t\t<div class="shade" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t\t\t\t<h2 class="ans-text img-ans-text"  data-answer="${s.text}" data-id="${n}">${s.text}</</h2>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>`;break;case 11:t.classList.add("ans-with-2options"),t.innerHTML+=`<div class="two-ans ans-box" id="two-ans-box" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t<div class="tools-ans-checker"></div>\n\t\t\t\t\t<div id ="two-ans-logo-disp" style='background-image:url("${s.img}")'  class="ans-logo" data-answer="${s.text}" data-id="${n}"></div>\n\t\t\t\t\t\t<p class="textt" data-answer="${s.text}" data-id="${n}"> ${s.text}</p>\n\t\t\t\t\t</div>`;break;case 2:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 12:t.innerHTML+=`\n\t\t\t\t\t<div class="textonlybox ans-box" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t\t<div class="text-checker" data-answer="${s.text}" data-id="${n}"></div>\n\t\t\t\t\t\t<div class="text-content" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t\t\t<p class="box-text" data-answer="${s.text}" data-id="${n}">${s.text}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;break;case 3:t.innerHTML+=`\n\t\t\t\t\t<div class="bare-ans ans-box" data-answer="${s.text}" data-id="${n}">\n\t\t\t\t\t<div class="tools-ans-checker"></div>\n\t\t\t\t\t<div id ="logo-disp" style='background-image:url("${s.img}")'  class="ans-logo" data-answer="${s.text}" data-id="${n}"></div>\n\t\t\t\t\t\t<p data-answer="${s.text}" data-id="${n}"> ${s.text}</p>\n\t\t\t\t\t</div>`}switch(e){case 1:case 9:case 10:t.classList.add("eight-ans-grid");break;case 3:t.classList.add("icon-text-ans");break;case 13:t.classList.add("continous-two");break;case 4:case 5:case 6:case 7:case 8:case 14:case 15:t.classList.add("ans-with-4ans-textonly");break;case 16:case 17:case 18:case 12:document.querySelectorAll(".ans-box").forEach((t=>t.classList.add("five-texts-ans"))),t.classList.add("ans-with-5option-textonly");break;case 19:case 20:case 2:t.classList.add("straight-ans")}handleAnswers(e)}),0)}if(["eight-ans-grid","icon-text-ans","continous-two","ans-with-4ans-textonly","ans-with-5option-textonly","straight-ans","ans-with-2options"].forEach((e=>{t.classList.value.includes(e)&&t.classList.remove(e)})),n[e].answers[0].text&&n[e].answers.forEach(((t,e)=>{s(e,t)})),!n[e].answers[0].text){function a(t){n[e].answers[t].forEach(((t,e)=>{s(e,t)}))}switch(parseInt(Object.keys(USERS_FILE[1])[0])){case 0:case 2:a(0);break;case 1:case 3:a(1);break;case 4:a(2);break;case 5:a(3);break;case 6:a(4);break;case 7:a(5);break;default:return}}}const addCheckAnimationForImgTextBox=t=>{t.classList.add("checked2")},removeCheckAnimationForImgTextBox=t=>{t.classList.remove("checked2")},addCheckAnimationForTextBoxOnly=(t,e)=>{let n=e;t.classList.add("text-checked"),n.classList.add("textcontainer-checked")},removeCheckAnimationForTextBoxOnly=(t,e)=>{let n=e;t.classList.remove("text-checked"),n.classList.remove("textcontainer-checked")},addCheckAnimationForIconAndText=(t,e)=>{let n=e;t.classList.add("opacity"),n.classList.add("tools-ans-checked")},removeCheckAnimationForIconAndText=(t,e)=>{let n=e;t.classList.remove("opacity"),n.classList.remove("tools-ans-checked")},addCheckAnimationForTwoAns=(t,e)=>{let n=e;t.classList.add("opacity"),n.classList.add("two-ans-container-checked")},removeCheckAnimationForTwoAns=(t,e)=>{let n=e;t.classList.remove("opacity"),n.classList.remove("two-ans-container-checked")};function addClass(t){let e=[t.target,t.target.parentElement,t.target.parentElement.parentElement,t.target.parentElement.parentElement.parentElement];for(let t in e){if(e[t].classList.value.includes("text-imgbox")){addCheckAnimationForImgTextBox(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("textonlybox")){addCheckAnimationForTextBoxOnly(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("bare-ans")){addCheckAnimationForIconAndText(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("two-ans")){addCheckAnimationForTwoAns(e[t].children[0],e[t]);break}}}function removeClass(t){let e=[t.target,t.target.parentElement,t.target.parentElement.parentElement,t.target.parentElement.parentElement.parentElement];for(let t in e){if(e[t].classList.value.includes("text-imgbox")){removeCheckAnimationForImgTextBox(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("textonlybox")){removeCheckAnimationForTextBoxOnly(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("bare-ans")){removeCheckAnimationForIconAndText(e[t].children[0],e[t]);break}if(e[t].classList.value.includes("two-ans")){removeCheckAnimationForTwoAns(e[t].children[0],e[t]);break}}}function markAndSaveSelections(t,e,n){t||(selectionChoice.innerText="Please select only one.",e.forEach((s=>{s.addEventListener("click",(s=>{let a=s.target;e.forEach((t=>{t.classList.value.includes("text-imgbox")?removeCheckAnimationForImgTextBox(t.children[0],t):t.classList.value.includes("textonlybox")?removeCheckAnimationForTextBoxOnly(t.children[0],t):(t.classList.value.includes("bare-ans")&&removeCheckAnimationForIconAndText(t.children[0],t),t.classList.value.includes("two-ans")&&removeCheckAnimationForTwoAns(t.children[0],t))})),addClass(s),1===n&&reset(),addAnswerToPersonObject(t,a.dataset.id,a.dataset.answer,n)}))}))),t&&(selectionChoice.innerText="You can select as many as you wish.",e.forEach((e=>{e.addEventListener("click",(e=>{let s=[e.target,e.target.parentElement,e.target.parentElement.parentElement,e.target.parentElement.parentElement.parentElement];for(let a in s){if(s[a].classList.value.includes("text-imgbox")&&s[a].children[0].classList.value.includes("checked2")||s[a].classList.value.includes("textonlybox")&&s[a].children[0].classList.value.includes("text-checked")||s[a].classList.value.includes("bare-ans")&&s[a].children[0].classList.value.includes("opacity")||s[a].classList.value.includes("two-ans")&&s[a].children[0].classList.value.includes("opacity")){removeClass(e),removeAnswerToPersonObject(s[a].dataset.id,n);break}(s[a].classList.value.includes("bare-ans")&&!s[a].children[0].classList.value.includes("opacity")||s[a].classList.value.includes("textonlybox")&&!s[a].children[0].classList.value.includes("text-checked")||s[a].classList.value.includes("text-imgbox")&&!s[a].children[0].classList.value.includes("checked2")||s[a].classList.value.includes("two-ans")&&s[a].children[0].classList.value.includes("opacity"))&&(addClass(e),addAnswerToPersonObject(t,s[a].dataset.id,s[a].dataset.answer,n))}}))})))}function moreThanOneSelectionIsPermitted(t){switch(t){case 3:case 9:case 10:return!0;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return!1}}function handleAnswers(t){const e=document.querySelectorAll(".ans-box"),n=moreThanOneSelectionIsPermitted(t);document.querySelectorAll(".end").forEach((t=>{t.disabled=!0})),t<=Questions.length-1&&t>0&&(starterPage.style.display="none",startQuestion.style.display="flex",thankYou.style.display="none",markAlreadyChosenSelections(t),markAndSaveSelections(n,e,t))}function removeAnswerToPersonObject(t,e){delete USERS_FILE[e][t]}function addAnswerToPersonObject(t,e,n,s){t&&(USERS_FILE[s][e]={...USERS_FILE[s][e],answerText:n}),t||(USERS_FILE[s]={[e]:{answerText:n}})}function keydownHandler(t){!0!==otfp&&(currentFormStage()!==Object.values(USERS_FILE).length+1?currentFormStage()<=Object.values(USERS_FILE).length&&currentFormStage()>0&&("ArrowRight"===t.key&&gotoNextStep(currentFormStage(),Questions),"ArrowLeft"===t.key&&gotoPreviousStep(currentFormStage(),Questions)):"ArrowLeft"===t.key&&gotoPreviousStep(currentFormStage(),Questions))}function enterKeyPressHandler(t){currentFormStage()<Object.values(USERS_FILE).length+1&&"Enter"===t.key&&gotoNextStep(currentFormStage(),Questions)}changeEmailContainer.style.display="none",resubmitEmailContainer.style.display="none",inner.onfocus=()=>{document.querySelector(".email").style.overflow="scroll",inner.classList.remove("turndot","turndot"),inner.contentEditable=!0,otfp=!0},inner.onblur=()=>{otfp=!1;const t=document.querySelector(".email");inner.classList.add("turndot"),t.style.overflow="hidden",editfield.innerText!==sessionStorage.getItem("email")&&(validateEmail(editfield.innerText)&&(changeEmailContainer.style.display="flex",gsap.fromTo(changeEmailContainer,{opacity:0},{opacity:1,duration:.3})),validateEmail(editfield.innerText)||(inner.innerText=sessionStorage.getItem("email")))},inner.onkeydown=t=>{otfp=!0,"Enter"===t.key&&(editfield.contentEditable=!1,editfield.innerText!==sessionStorage.getItem("email")&&(validateEmail(editfield.innerText)&&(changeEmailContainer.style.display="flex",gsap.fromTo(changeEmailContainer,{opacity:0},{opacity:1,duration:.3})),validateEmail(editfield.innerText)||(editfield.contentEditable=!0,editfield.innerText=sessionStorage.getItem("email"),editfield.style.width="auto")))},changeEmail.forEach((t=>{t.onclick=()=>{sessionStorage.setItem("email",editfield.innerText),sendEmail(sessionStorage.getItem("email",editfield.innerText)),gsap.to(changeEmailContainer,{opacity:0,duration:.3}),gsap.to(resubmitEmailContainer,{opacity:0,duration:.3});debounce((()=>{changeEmailContainer.style.display="none",resubmitEmailContainer.style.display="none"}),300)()}})),cancel.forEach((t=>{t.onclick=t=>{gsap.to(changeEmailContainer,{opacity:0,duration:.3}),gsap.to(resubmitEmailContainer,{opacity:0,duration:.3}),gsap.to(".control-buttons",{opacity:1,y:0,duration:.5}),gsap.to(".circle-progress",{opacity:1},"<");debounce((()=>{changeEmailContainer.style.display="none",resubmitEmailContainer.style.display="none"}),300)(),t.target.classList.value.includes("c2")&&setStage(currentFormStage()-1)}})),ContinueButton.addEventListener("click",(t=>{debounce((()=>gotoNextStep(currentFormStage(),Questions)),100)()})),BackButton.addEventListener("click",(t=>{debounce((()=>gotoPreviousStep(currentFormStage(),Questions)),200)()})),window.addEventListener("keydown",(t=>{debounce((()=>{keydownHandler(t)}),200)()})),window.addEventListener("keydown",(t=>{debounce((()=>{enterKeyPressHandler(t)}),200)()})),animateProgress(0);