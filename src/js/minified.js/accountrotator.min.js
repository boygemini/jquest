"use strict";async function accountRotator(e){let{service_id:t,private_key:s,template_id:o}=accounts[submitCounter],r=setTimeout(()=>{if(!successfulSubmit)return timedOut=!0,removeMessage(),animateErrorMessage(8e3,600,20,"Timed Out : Please check your internet connection and try again. Thank you.","show-error-message","remove-error-message"),setStage(questions.length-1),submitCounter=0,void disableButtons(!1);successfulSubmit&&(timedOut=!1)},1e5);emailjs.send(t,o,e,s).then(function(){if(!1===timedOut){successfulSubmit=!0,clearTimeout(r),showSent("Form Submitted Successfully"),showThankYouPage(startQuestion);const e=debounce(()=>{ContinueButton.style.display="none",BackButton.classList.add("widen"),BackButton.style.display="flex"},400);e();const t=debounce(()=>{thankYou.style.display="flex",starterPage.style.display="none",startQuestion.style.display="none",body.classList.add("blurbody")},600);t(),userEmail.value=sessionStorage.getItem("email"),submittedForm=!0,disableButtons(!1),window.addEventListener("keydown",lrkeydownHandler),window.addEventListener("keydown",entkeydownHandler),successfulSubmit=!1}},function(t){successfulSubmit=!0,clearTimeout(r);let s=accounts.length-1;if(submitCounter++,412===t.status)return removeMessage(),animateErrorMessage(6e3,600,20,"Error occurred : Your email address appears to be invalid, please check and resubmit form","show-error-message","remove-error-message"),0!==currentFormStage()&&setStage(questions.length-1),submitCounter=0,void disableButtons(!1);if(submitCounter===s){let e;return t.text&&(e="please try again later. Thank you."),gsap.to(".control-buttons",{opacity:1,y:0,duration:.5}),gsap.to(".circle-progress",{opacity:1},"<"),removeMessage(),animateErrorMessage(6e3,600,20,`Error occurred : ${e||"no internet connection"}`,"show-error-message","remove-error-message"),0!==currentFormStage()&&setStage(questions.length-1),submitCounter=0,disableButtons(!1),void(successfulSubmit=!1)}const o=debounce(()=>{accountRotator(e)},100);o()})}import{showThankYouPage}from"./animations.min.js";import questions from"./questions.min.js";import{animateErrorMessage,setStage,debounce,disableButtons,lrkeydownHandler,entkeydownHandler,currentFormStage}from"./script.min.js";import accounts from"./config.min.js";const starterPage=document.querySelector(".q-container"),startQuestion=document.querySelector(".main-Q-container"),thankYou=document.querySelector(".thank-you"),BackButton=document.querySelector(".back-button"),ContinueButton=document.getElementById("continue"),userEmail=document.getElementById("email"),submitLoader=document.querySelector(".circle-loader"),successMark=document.querySelector(".checkmark"),loaderDOM=document.querySelector(".loader"),successText=document.querySelector(".sent-message");let submitCounter=0;export let submittedForm=!1;export let didntSendEmailDueToError=!1;export function showSent(e){successText.style.opacity="0",setTimeout(()=>{successText.innerText=e,successText.style.display="none",loaderDOM.style.justifyContent="center",submitLoader.classList.add("load-complete"),loaderDOM.style.backgroundColor="#11bd05",loaderDOM.style.width=`${submitLoader.scrollWidth+65}px`},200);const t=debounce(()=>{successMark.style.display="flex",successText.style.display="none"},300);t();const s=debounce(()=>{successText.style.opacity="0";const e=debounce(()=>{loaderDOM.style.width=`${submitLoader.scrollWidth+65}px`},300);e();const t=debounce(()=>{loaderDOM.classList.remove("show"),loaderDOM.classList.add("remove"),submitLoader.classList.remove("load-complete"),successMark.style.display="none"},600);t()},1e3);s()}export function removeMessage(){successText.style.opacity="0",setTimeout(()=>{loaderDOM.classList.remove("show"),loaderDOM.classList.add("remove")},600),setTimeout(()=>{loaderDOM.style.width="auto"},1e3)}let successfulSubmit=!1,timedOut=!1;export default accountRotator;